webpackJsonp([5],{"+3dj":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gallery-container"},[i("div",{staticClass:"gallery-lists"},[i("button",{on:{click:function(e){e.preventDefault(),t.addGallery=!t.addGallery}}},[t._v("Add Gallery")]),i("gallery-list")],1),i("div",{class:{backdrop:t.addGallery}},[t.addGallery?i("div",{staticClass:"gallery-editor",class:{"show-modal":t.addGallery}},[i("gallery-editor",{attrs:{addGallery:t.addGallery},on:{cancelForm:function(e){t.addGallery=!1}}})],1):t._e()])])};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},"48dw":function(t,e,i){"use strict";var a=i("Xxa5"),s=i.n(a),r=i("exGp"),l=i.n(r);e.a={layout:"admin",data:function(){return{submitTxt:"Submit",details:[{title:"",description:"",image:""}],image:"",errors:""}},methods:{onImageChange:function(t,e){e.target.files.length&&(this.details[t].image=e.target.files[0])},addFields:function(){this.details.push({title:"",description:""})},resetForm:function(){this.details.forEach(function(t){t.title="",t.description=""}),this.$emit("cancelForm")},submitForm:function(){var t=l()(s.a.mark(function t(){var e,i,a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.submitTxt="Submitting",!this.$route.params.id){t.next=14;break}return t.prev=2,t.next=5,this.$axios.$put("/api/galleries/"+this.$route.params.id,{title:this.details[0].title,description:this.details[0].description,images:this.details[0].image});case 5:e=t.sent,this.$store.dispatch("galleries/allGalleries",e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:t.next=26;break;case 14:for(a in i=new FormData,this.details)this.details.hasOwnProperty(a)&&(i.append("details["+a+"][title]",this.details[a].title),i.append("details["+a+"][description]",this.details[a].description),i.append("details["+a+"][image]",this.details[a].image));return t.prev=16,t.next=19,this.$axios.$post("/api/galleries",i);case 19:r=t.sent,this.$store.dispatch("galleries/allGalleries",r),t.next=26;break;case 23:t.prev=23,t.t1=t.catch(16),console.log(t.t1);case 26:this.resetForm();case 27:case"end":return t.stop()}},t,this,[[2,9],[16,23]])}));return function(){return t.apply(this,arguments)}}(),getGallery:function(){var t=this;this.$route.params.id&&this.$store.state.galleries.allGalleries?this.details=this.$store.state.galleries.allGalleries.filter(function(e){if(e.id==t.$route.params.id)return{title:e.title,description:e.description,image:""}}):this.$route.params.id&&this.loadGallery()},loadGallery:function(){var t=l()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.$get("/api/galleries/"+this.$route.params.id);case 3:e=t.sent,this.details.forEach(function(t){t.title=e.title,t.description=e.description,t.image=""}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.errors=t.t0;case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.getGallery()}}},"8O13":function(t,e,i){var a=i("m56w");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("fea1f846",a,!1,{sourceMap:!1})},"8qi7":function(t,e,i){"use strict";var a=i("bemy"),s=i("mM44"),r=!1;var l=function(t){r||i("8O13")},n=i("VU/8")(a.a,s.a,!1,l,"data-v-7f828c6e",null);n.options.__file="resources/nuxt/components/itemAction.vue",e.a=n.exports},B1BJ:function(t,e,i){var a=i("RTzB");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("6e789d6d",a,!1,{sourceMap:!1})},CzmL:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{id:"galleryForm"}},[t.errors?i("span",[t._v("Error occured. Try again.")]):t._e(),i("span",{on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[i("i",{staticClass:"fa fa-asterisk fa-3x"})]),t._l(t.details,function(e,a){return i("div",{staticClass:"fields"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"field.title"}],attrs:{type:"text",id:"title",placeholder:"Title",autocomplete:"title"},domProps:{value:e.title},on:{input:function(i){i.target.composing||t.$set(e,"title",i.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"field.description"}],attrs:{type:"text",id:"desc",placeholder:"Description",autocomplete:"description"},domProps:{value:e.description},on:{input:function(i){i.target.composing||t.$set(e,"description",i.target.value)}}}),i("input",{attrs:{type:"file",accept:"image/*",id:"file"},on:{change:function(e){t.onImageChange(a,e)}}})])}),t.$route.params.id?t._e():i("button",{on:{click:function(e){return e.preventDefault(),t.addFields(e)}}},[t._v("Add Fields")]),i("button",{class:{"full-btn":t.$route.params.id},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(t._s(t.submitTxt))])],2)};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},LQwT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("k3BS"),s=i("+3dj"),r=!1;var l=function(t){r||i("kUOq")},n=i("VU/8")(a.a,s.a,!1,l,null,null);n.options.__file="resources/nuxt/pages/admin/gallery/index.vue",e.default=n.exports},"P+IK":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".fields[data-v-4471750f],form[data-v-4471750f]{display:grid;grid-gap:15px;grid-template-columns:1fr 1fr}.fields[data-v-4471750f],.full-btn[data-v-4471750f]{grid-column:1/-1}#title[data-v-4471750f]{grid-column:1/2}#desc[data-v-4471750f]{grid-column:2/3}#file[data-v-4471750f]{grid-column:1/-1}.fa[data-v-4471750f]{cursor:pointer;color:#cd5c5c;position:absolute;top:-60px;right:10px}@media(max-width:767px){.fields[data-v-4471750f],form[data-v-4471750f]{grid-template-columns:1fr}#desc[data-v-4471750f],#file[data-v-4471750f],#title[data-v-4471750f],.fields[data-v-4471750f]{grid-column:1/-1}.fa[data-v-4471750f]{top:0;right:60px;font-size:2em}}",""])},PxCG:function(t,e,i){"use strict";var a=i("xWHD"),s=i("qozU"),r=!1;var l=function(t){r||i("B1BJ")},n=i("VU/8")(a.a,s.a,!1,l,"data-v-aa3d4380",null);n.options.__file="resources/nuxt/components/gallery/list.vue",e.a=n.exports},RTzB:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".gallery-list[data-v-aa3d4380]{background:#f9f9f9}.gallery-item[data-v-aa3d4380]{color:#333;margin:10px 20px;display:grid;grid-gap:15px;grid-template-columns:1fr 1fr 200px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ccc;padding:20px 10px}.gallery-item[data-v-aa3d4380]:last-child{border-bottom:none}.title[data-v-aa3d4380]{margin:0;font-weight:700;display:block}.desc[data-v-aa3d4380]{margin-top:5px}.gallery-item img[data-v-aa3d4380]{width:100px}@media(max-width:767px){.gallery-item[data-v-aa3d4380]{grid-template-columns:1fr 1fr 10px;margin:10px 0}.gallery-item img[data-v-aa3d4380]{width:100px}}",""])},X63q:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".show-modal{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:30%;padding:50px}.backdrop{width:100%;height:100%;background-color:hsla(0,0%,48%,.8);z-index:1000;position:fixed;top:0;left:0}.gallery-lists{margin:10px auto;width:60%;display:grid}.gallery-lists button{margin-bottom:10px}@media(max-width:767px){.gallery-lists,.show-modal{width:100%}}",""])},bemy:function(t,e,i){"use strict";e.a={props:["selectedItem","item","route","deleteApi","selectedItemStore","dispatchAction","redirectUser"],methods:{unsetSelected:function(){this.$store.dispatch(this.selectedItemStore,null)},setSelected:function(){this.$store.dispatch(this.selectedItemStore,this.item)}}}},k3BS:function(t,e,i){"use strict";var a=i("PxCG"),s=i("ldX8");e.a={layout:"admin",components:{GalleryList:a.a,GalleryEditor:s.a},data:function(){return{addGallery:!1}}}},kUOq:function(t,e,i){var a=i("X63q");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("735df2f7",a,!1,{sourceMap:!1})},ldX8:function(t,e,i){"use strict";var a=i("48dw"),s=i("CzmL"),r=!1;var l=function(t){r||i("p0mb")},n=i("VU/8")(a.a,s.a,!1,l,"data-v-4471750f",null);n.options.__file="resources/nuxt/components/gallery/editor.vue",e.a=n.exports},m56w:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".item-action[data-v-7f828c6e]{position:relative}.ellipsis[data-v-7f828c6e]{cursor:pointer;-webkit-transition:1s ease;transition:1s ease;color:#4d1f56;position:absolute;top:-15px;right:50px}.fa-times-circle[data-v-7f828c6e]{position:absolute;top:25px;right:-25px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.selected-item[data-v-7f828c6e]{position:relative}.selected-item-action[data-v-7f828c6e]{position:absolute;right:100px}.selected-item-action i[data-v-7f828c6e]{margin:0 5px;font-size:19.2px;font-size:1.2rem;cursor:pointer}.fa-eye[data-v-7f828c6e]{color:#24bf83}.fa-pencil[data-v-7f828c6e]{color:#333}.fa-trash[data-v-7f828c6e]{color:#cd5c5c}@media(max-width:767px){.ellipsis[data-v-7f828c6e]{right:20px}.selected-item-action[data-v-7f828c6e]{right:5px;top:-50px}.fa-times-circle[data-v-7f828c6e]{position:absolute;top:40px;right:-25px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.action-link[data-v-7f828c6e]{margin-bottom:9px}}",""])},mM44:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-action"},[t.selectedItem?i("div",{class:[{"selected-item":t.selectedItem},{"unselected-item":!t.selectedItem}]},[i("div",[t.selectedItem.id==t.item.id?i("span",{staticClass:"selected-item-action"},[i("a",{staticClass:"action-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.$router.push(t.route+"/"+t.item.id+"/edit")}}},[i("i",{staticClass:"fa fa-pencil"})]),i("a",{staticClass:"action-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.$router.push({path:t.route+"/"+t.item.id+"/delete",params:t.item.id,query:{deleteApi:t.deleteApi,redirectUser:t.redirectUser}})}}},[i("i",{staticClass:"fa fa-trash"})])]):t._e()])]):t._e(),i("span",{staticClass:"ellipsis",on:{click:function(e){t.setSelected(t.item)}}},[t.selectedItem&&t.selectedItem.id==t.item.id?i("i",{staticClass:"fa fa-times-circle fa-2x",on:{click:function(e){return e.stopPropagation(),t.unsetSelected(e)},mouseout:function(t){t.stopPropagation()}}}):i("i",{staticClass:"fa fa-ellipsis-v fa-2x"})])])};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},p0mb:function(t,e,i){var a=i("P+IK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("71cf3713",a,!1,{sourceMap:!1})},qozU:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gallery-list"},t._l(t.galleries,function(e){return i("div",{staticClass:"gallery-item"},[i("div",[i("span",{staticClass:"title"},[t._v(t._s(e.title))]),i("span",{staticClass:"desc"},[t._v(t._s(e.description))])]),i("img",{attrs:{src:"/"+e.image_path,alt:"bfa image"}}),i("div",[i("ItemAction",{attrs:{item:e,route:t.route,deleteApi:t.deleteApi,selectedItemStore:t.selectedItemStore,redirectUser:t.route,selectedItem:t.selectedItem}})],1)])}))};a._withStripped=!0;var s={render:a,staticRenderFns:[]};e.a=s},xWHD:function(t,e,i){"use strict";var a=i("8qi7");e.a={components:{ItemAction:a.a},data:function(){return{route:"/admin/gallery",deleteApi:"/api/galleries",selectedItemStore:"galleries/selectedItem"}},computed:{galleries:function(){return this.$store.getters["galleries/allGalleries"]},selectedItem:function(){return this.$store.getters["galleries/selectedItem"]}},mounted:function(){this.$store.dispatch("galleries/allGalleries")}}}});