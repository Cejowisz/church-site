webpackJsonp([8],{"/OeA":function(t,e,i){"use strict";var a=i("ldX8");e.a={layout:"admin",components:{Editor:a.a}}},"3qyC":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".device-editor-container{min-height:100vh;display:grid;-ms-flex-line-pack:center;align-content:center}.device-editor-container div{margin:0 auto}.add-margin-top{margin-top:0}",""])},"48dw":function(t,e,i){"use strict";var a=i("Xxa5"),r=i.n(a),s=i("exGp"),n=i.n(s);e.a={layout:"admin",data:function(){return{submitTxt:"Submit",details:[{title:"",description:"",image:""}],image:"",errors:""}},methods:{onImageChange:function(t,e){e.target.files.length&&(this.details[t].image=e.target.files[0])},addFields:function(){this.details.push({title:"",description:""})},resetForm:function(){this.details.forEach(function(t){t.title="",t.description=""}),this.$emit("cancelForm")},submitForm:function(){var t=n()(r.a.mark(function t(){var e,i,a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.submitTxt="Submitting",!this.$route.params.id){t.next=14;break}return t.prev=2,t.next=5,this.$axios.$put("/api/galleries/"+this.$route.params.id,{title:this.details[0].title,description:this.details[0].description,images:this.details[0].image});case 5:e=t.sent,this.$store.dispatch("galleries/allGalleries",e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:t.next=26;break;case 14:for(a in i=new FormData,this.details)this.details.hasOwnProperty(a)&&(i.append("details["+a+"][title]",this.details[a].title),i.append("details["+a+"][description]",this.details[a].description),i.append("details["+a+"][image]",this.details[a].image));return t.prev=16,t.next=19,this.$axios.$post("/api/galleries",i);case 19:s=t.sent,this.$store.dispatch("galleries/allGalleries",s),t.next=26;break;case 23:t.prev=23,t.t1=t.catch(16),console.log(t.t1);case 26:this.resetForm();case 27:case"end":return t.stop()}},t,this,[[2,9],[16,23]])}));return function(){return t.apply(this,arguments)}}(),getGallery:function(){var t=this;this.$route.params.id&&this.$store.state.galleries.allGalleries?this.details=this.$store.state.galleries.allGalleries.filter(function(e){if(e.id==t.$route.params.id)return{title:e.title,description:e.description,image:""}}):this.$route.params.id&&this.loadGallery()},loadGallery:function(){var t=n()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.$get("/api/galleries/"+this.$route.params.id);case 3:e=t.sent,this.details.forEach(function(t){t.title=e.title,t.description=e.description,t.image=""}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.errors=t.t0;case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.getGallery()}}},ACLJ:function(t,e,i){"use strict";var a=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"device-editor-container"},[e("div",[e("editor")],1)])};a._withStripped=!0;var r={render:a,staticRenderFns:[]};e.a=r},CzmL:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{id:"galleryForm"}},[t.errors?i("span",[t._v("Error occured. Try again.")]):t._e(),i("span",{on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[i("i",{staticClass:"fa fa-asterisk fa-3x"})]),t._l(t.details,function(e,a){return i("div",{staticClass:"fields"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"field.title"}],attrs:{type:"text",id:"title",placeholder:"Title",autocomplete:"title"},domProps:{value:e.title},on:{input:function(i){i.target.composing||t.$set(e,"title",i.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"field.description"}],attrs:{type:"text",id:"desc",placeholder:"Description",autocomplete:"description"},domProps:{value:e.description},on:{input:function(i){i.target.composing||t.$set(e,"description",i.target.value)}}}),i("input",{attrs:{type:"file",accept:"image/*",id:"file"},on:{change:function(e){t.onImageChange(a,e)}}})])}),t.$route.params.id?t._e():i("button",{on:{click:function(e){return e.preventDefault(),t.addFields(e)}}},[t._v("Add Fields")]),i("button",{class:{"full-btn":t.$route.params.id},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v(t._s(t.submitTxt))])],2)};a._withStripped=!0;var r={render:a,staticRenderFns:[]};e.a=r},"P+IK":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".fields[data-v-4471750f],form[data-v-4471750f]{display:grid;grid-gap:15px;grid-template-columns:1fr 1fr}.fields[data-v-4471750f],.full-btn[data-v-4471750f]{grid-column:1/-1}#title[data-v-4471750f]{grid-column:1/2}#desc[data-v-4471750f]{grid-column:2/3}#file[data-v-4471750f]{grid-column:1/-1}.fa[data-v-4471750f]{cursor:pointer;color:#cd5c5c;position:absolute;top:-60px;right:10px}@media(max-width:767px){.fields[data-v-4471750f],form[data-v-4471750f]{grid-template-columns:1fr}#desc[data-v-4471750f],#file[data-v-4471750f],#title[data-v-4471750f],.fields[data-v-4471750f]{grid-column:1/-1}.fa[data-v-4471750f]{top:0;right:60px;font-size:2em}}",""])},cxnh:function(t,e,i){var a=i("3qyC");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("4aee47da",a,!1,{sourceMap:!1})},ldX8:function(t,e,i){"use strict";var a=i("48dw"),r=i("CzmL"),s=!1;var n=function(t){s||i("p0mb")},o=i("VU/8")(a.a,r.a,!1,n,"data-v-4471750f",null);o.options.__file="resources/nuxt/components/gallery/editor.vue",e.a=o.exports},p0mb:function(t,e,i){var a=i("P+IK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("71cf3713",a,!1,{sourceMap:!1})},pCXR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("/OeA"),r=i("ACLJ"),s=!1;var n=function(t){s||i("cxnh")},o=i("VU/8")(a.a,r.a,!1,n,null,null);o.options.__file="resources/nuxt/pages/admin/gallery/_id/edit.vue",e.default=o.exports}});